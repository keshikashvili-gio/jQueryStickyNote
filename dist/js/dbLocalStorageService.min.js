window.note=window.note||{},+function($){"use strict";note.DbLocalStorageService=function(options){this.options=options},note.DbLocalStorageService.prototype=Object.create(note.DbService.prototype),note.DbLocalStorageService.prototype.constructor=note.DbLocalStorageService,note.DbLocalStorageService.prototype.save=function(newData){var data=this._getAllFromLocalStorage();newData.id=parseInt(this._getMaxId()+1),data.push(newData),this._saveToLocalStorage(data)},note.DbLocalStorageService.prototype["delete"]=function(id){for(var data=this._getAllFromLocalStorage(),i=0;i<data.length;i++)data[i].id==id&&data.splice(i,1);this._saveToLocalStorage(data)},note.DbLocalStorageService.prototype.deleteAll=function(){},note.DbLocalStorageService.prototype.update=function(updatedData){for(var data=this._getAllFromLocalStorage(),i=0;i<data.length;i++)data[i].id==updatedData.id&&(data[i]=updatedData);console.log(updatedData),this._saveToLocalStorage(data)},note.DbLocalStorageService.prototype.updateAll=function(){},note.DbLocalStorageService.prototype.getData=function(){return this._getAllFromLocalStorage()},note.DbLocalStorageService.prototype.lastInsertId=function(){return this._getMaxId()},note.DbLocalStorageService.prototype._getAllFromLocalStorage=function(){var storage=localStorage.getItem(this.options.localStorageKey);return storage?JSON.parse(storage):[]},note.DbLocalStorageService.prototype._saveToLocalStorage=function(data){localStorage.setItem(this.options.localStorageKey,JSON.stringify(data))},note.DbLocalStorageService.prototype._getItemFromLocalStorage=function(key){return this._getAllFromLocalStorage()[key]},note.DbLocalStorageService.prototype._getMaxId=function(){var max=0;return $.each(this.getData(),function(index,item){item.id>max&&(max=item.id)}),max}}(jQuery);